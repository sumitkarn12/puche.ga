<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>puche.ga | कुछो पूछना है</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Jo puchna hai puch lijiye | जो पूछना है पूछ लीजिये एकदम से " />

		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="194x194" href="/images/favicon-194x194.png">
		<link rel="icon" type="image/png" sizes="192x192" href="/images/android-chrome-192x192.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="manifest" href="/manifest.json">
		<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#c2ade6">
		<meta name="apple-mobile-web-app-title" content="puche.ga | कुछो पूछना है">
		<meta name="application-name" content="puche.ga | कुछो पूछना है">
		<meta name="msapplication-TileColor" content="#c2ade6">
		<meta name="msapplication-TileImage" content="/images/mstile-144x144.png">
		<meta name="theme-color" content="#c2ade6">
		<link rel="shortcut icon" href="/favicon.ico">

		<!-- og tags -->
		<meta property="og:image" content="https://puche.ga/images/android-chrome-512x512.png"/>
		<meta property="og:title" content="puche.ga | कुछो पूछना है"/>
		<meta property="og:description" content="Jo puchna hai puch lijiye | जो पूछना है पूछ लीजिये एकदम से "/>
		<meta property="og:site_name" content="puche.ga"/>
		<meta property="og:type" content="website"/>
		<meta property="og:url" content="https://puche.ga"/>

		<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
		<link rel="stylesheet" href="/css/w3.css">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/message/message.css">
	</head>

	<body>
		<div class="backpanel"></div>
		<div class="splash"><i class="material-icons icon">favorite</i></div>
		<div class="app">
			<section class="guard" v-if="notLogged">
				<div class="w3-padding">
					<i class="material-icons profile w3-animate-top">person</i>
					<input tabindex="1" id="input-key" v-model="pin" type="number" class="w3-input input w3-card w3-round w3-block w3-padding w3-animate-left w3-center" v-bind:placeholder="guard_key_placeholder" autofocus />
				</div>
			</section>
			<section class="message" v-else="notLogged">
				<form id="feedback-form" class="flex-container" v-on:submit.prevent="submitMessage">
					<div class="pin flex-center w3-round w3-white w3-animate-top"><span class="w3-animate-axle">{{pin}}</span></div>
					<textarea v-model="message" tabindex="2" name="message" id="message" class="w3-input input w3-round w3-center w3-animate-right" v-on:keyup="increaseHeight" v-bind:placeholder="message_placeholder"></textarea>
					<button tabindex="3" class="material-icons w3-button w3-round w3-white flex-center w3-animate-left">{{submit_btn_icon}}</button>
				</form>
				<div class="w3-section"></div>
				<div class="recent-messages">
					<div v-for="msg in recent" class="message-card" v-bind:class="msg.type" v-bind:class="msg.user">
						<div class="w3-card w3-shadow w3-round-xxlarge w3-white w3-animate-opacity" v-on:click="openResponses" v-bind:id="msg.id">
							<div v-html="msg.message"></div>
							<div class="w3-tiny">{{msg.createdAt}}</div>
						</div>
						<span class="w3-badge w3-orange">{{msg.response_count}}</span>
					</div>
				</div>
				<div class="w3-modal" id="response-modal">
					<div class="w3-modal-content w3-animate-top w3-round-large w3-card-4">
						<div class="w3-bar w3-card-4">
							<div class="w3-padding w3-bar-item">Responses</div>
							<button class="w3-button material-icons w3-right" v-on:click="closeResponse">close</button>
						</div>
						<div class="responses w3-padding"></div>
						<form class="new-response-form w3-card-4" v-on:submit.prevent="submitResponse">
							<input type="hidden" v-model="response_id"/>
							<input type="text" v-model="response_text" class="w3-input" v-bind:placeholder="response_placeholder"/>
							<button class="w3-button w3-border-left material-icons">send</button>
						</form>
					</div>
				</div>
			</section>
		</div>

		<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js'></script>
		<script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
		<script src='/js/parse.min.js'></script>
		<script src="/message/message.js"></script>
		<script src="/js/index.js"></script>

		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', function() {
					navigator.serviceWorker.register('/sw.js').then(function(registration) {
						// Registration was successful
						console.log('ServiceWorker registration successful with scope: ', registration.scope);
					}, function(err) {
						// registration failed :(
						console.log('ServiceWorker registration failed: ', err);
					});
				});
			}
		</script>

	</body>
</html>

